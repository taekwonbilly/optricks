

def void printdensity(int d){
  if 		d > 8 	putchar(32)
  elif 	d > 4 	putchar(46)
  elif 	d > 2	  putchar(43)
  else       		putchar(42)
}

/*
def int printdensity(int d){
  if 		d > 8 	return putchar(32)
  elif 	0d > 4 	return putchar(46)
  elif 	d > 2	  return putchar(43)
  else       		return putchar(42)
}
*/

def int mandleconverger(double real, double imag, int iters=0, double creal, double cimag){
	if (iters > 255 | (real*real + imag*imag > 4)) return iters 
  return mandleconverger(real*real - imag*imag + creal, 2*real*imag + cimag, iters+1, creal, cimag)
}                           

def int mandleconverge(double real, double imag) return mandleconverger(real, imag, 0, real, imag)

def int mand(double r, double i){
	int iter = 0
	double x = r
	double y = i
	do{
		if( x*x + y*y > 4 ) return iter
		x = x*x - y*y + r
		y = 2*x*y + i
		iter +=1
	}while(iter<255)
	return iter
}

def void mandelhelp(double xmin, double xmax, double xstep, double ymin, double ymax, double ystep){
	for(double y = ymin; y<ymax; y+=ystep){
		for(double x = xmin; x<xmax; x+=xstep) printdensity(mand(x, y))
		putchar(10);
	}
}


def void mandel(double realstart=-2.3, double imagstart=-1.3, double realmag=0.05, double imagmag=0.07){
  mandelhelp(realstart, realstart+realmag*78, realmag,imagstart, imagstart+imagmag*40, imagmag)
}

mandel()
